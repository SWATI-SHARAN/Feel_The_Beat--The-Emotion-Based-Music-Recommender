<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feel the Beat</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #ff4d94;
      --secondary: #4d79ff;
      --tertiary: #4dffdf;
      --dark: #0f0c24;
      --darker: #070518;
      --card-bg: rgba(15, 12, 36, 0.7);
      --spotify-green: #1DB954;
      --error-red: #ff3860;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      background: linear-gradient(135deg, var(--darker), var(--dark));
      color: white;
      overflow-x: hidden;
      position: relative;
    }

    .cosmos {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }

    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle var(--duration, 5s) infinite ease-in-out;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.2; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    .nebula {
      position: absolute;
      border-radius: 50%;
      filter: blur(60px);
      opacity: 0.3;
      z-index: -1;
    }

    .floating {
      position: absolute;
      animation: float 25s infinite ease-in-out;
      opacity: 0.8;
      filter: blur(2px);
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(20px, 40px) rotate(5deg); }
      50% { transform: translate(-30px, 70px) rotate(-5deg); }
      75% { transform: translate(10px, 30px) rotate(3deg); }
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      position: relative;
      z-index: 10;
    }

    header {
      text-align: center;
      padding: 30px 0;
      margin-bottom: 20px;
      position: relative;
    }

    h1 {
      font-size: 3.5rem;
      margin-bottom: 10px;
      background: linear-gradient(90deg, var(--primary), var(--secondary), var(--tertiary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 0 20px rgba(255, 77, 148, 0.3);
      letter-spacing: 2px;
    }

    .subtitle {
      font-size: 1.2rem;
      color: rgba(255, 255, 255, 0.7);
      max-width: 600px;
      margin: 0 auto 30px;
    }

    .main-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 40px;
    }

    @media (max-width: 900px) {
      .main-content {
        grid-template-columns: 1fr;
      }
    }

    .panel {
      background: var(--card-bg);
      border-radius: 20px;
      padding: 25px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: all 0.4s ease;
    }

    .panel:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(77, 121, 255, 0.2);
      border-color: rgba(77, 121, 255, 0.3);
    }

    .panel-title {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 1.8rem;
      margin-bottom: 20px;
      color: var(--tertiary);
    }

    .panel-title i {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .camera-container {
      position: relative;
      width: 100%;
      height: 300px;
      border-radius: 15px;
      overflow: hidden;
      background: rgba(0, 0, 0, 0.3);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scaleX(-1);
    }

    #canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .emotion-display {
      text-align: center;
      font-size: 1.8rem;
      margin: 20px 0;
      min-height: 60px;
      padding: 15px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }

    .emotion-value {
      font-weight: bold;
      text-transform: capitalize;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-size: 2rem;
    }

    .emotion-icon {
      font-size: 2.5rem;
    }

    .controls {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      margin: 25px 0;
      justify-content: center;
    }

    button {
      padding: 14px 28px;
      border: none;
      border-radius: 50px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      font-weight: bold;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 5px 15px rgba(255, 77, 148, 0.3);
    }

    button:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 20px rgba(77, 121, 255, 0.4);
    }

    button:active {
      transform: translateY(1px);
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .language-selector {
      margin: 20px 0;
    }

    select {
      width: 100%;
      padding: 14px;
      border-radius: 12px;
      background: rgba(0, 0, 0, 0.3);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.1);
      font-size: 1rem;
      margin-top: 8px;
    }

    select:focus {
      outline: none;
      border-color: var(--tertiary);
    }

    .visualizer {
      display: flex;
      height: 100px;
      align-items: flex-end;
      justify-content: center;
      gap: 4px;
      margin: 20px 0;
    }

    .bar {
      width: 10px;
      background: linear-gradient(to top, var(--primary), var(--secondary));
      border-radius: 5px 5px 0 0;
      animation: dance 1.5s infinite ease-in-out;
      animation-delay: calc(var(--i) * 0.1s);
    }

    @keyframes dance {
      0%, 100% { height: 20%; }
      50% { height: 90%; }
    }

    .song-list {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      max-height: 400px;
      overflow-y: auto;
      padding-right: 10px;
    }

    .song-list::-webkit-scrollbar {
      width: 8px;
    }

    .song-list::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 4px;
    }

    .song-list::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 4px;
    }

    .track {
      display: flex;
      align-items: center;
      padding: 15px;
      border-radius: 15px;
      background: rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      gap: 15px;
      cursor: pointer;
    }

    .track:hover {
      background: rgba(77, 121, 255, 0.15);
      transform: translateX(5px);
    }

    .track img {
      width: 60px;
      height: 60px;
      border-radius: 10px;
      object-fit: cover;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .track-info {
      flex-grow: 1;
    }

    .track h3 {
      margin-bottom: 5px;
      font-size: 1.1rem;
    }

    .track p {
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.9rem;
    }

    .track-actions {
      display: flex;
      gap: 10px;
    }

    .track-actions button {
      padding: 10px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .favorites-panel {
      margin-top: 40px;
    }

    .favorites-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .favorite-card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 20px;
      transition: all 0.3s ease;
      border: 1px solid rgba(77, 121, 255, 0.1);
      cursor: pointer;
    }

    .favorite-card:hover {
      transform: translateY(-5px);
      border-color: rgba(77, 121, 255, 0.3);
      box-shadow: 0 10px 25px rgba(77, 121, 255, 0.2);
    }

    .favorite-card img {
      width: 100%;
      border-radius: 10px;
      margin-bottom: 15px;
      aspect-ratio: 1/1;
      object-fit: cover;
    }

    .status {
      text-align: center;
      padding: 20px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 15px;
      margin: 20px 0;
    }

    .loading {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
      margin-right: 10px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .pulse {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(77, 121, 255, 0.7); }
      70% { box-shadow: 0 0 0 15px rgba(77, 121, 255, 0); }
      100% { box-shadow: 0 0 0 0 rgba(77, 121, 255, 0); }
    }

    footer {
      text-align: center;
      padding: 30px 0;
      margin-top: 40px;
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.9rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .emotion-illustration {
      display: flex;
      justify-content: center;
      margin: 20px 0;
    }

    .emoji-face {
      font-size: 5rem;
      transition: transform 0.5s ease;
    }
    
    .notification {
      position: fixed;
      top: 80px;
      right: 20px;
      background: var(--spotify-green);
      color: white;
      padding: 15px 25px;
      border-radius: 10px;
      z-index: 1000;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      transform: translateX(120%);
      transition: transform 0.4s ease;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification.error {
      background: var(--error-red);
    }
    
    .connection-status {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.7);
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .status-connected {
      color: var(--tertiary);
    }
    
    .spotify-icon {
      color: var(--spotify-green);
    }
    
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }
    
    .feature-card {
      background: rgba(15, 12, 36, 0.5);
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      transition: all 0.3s ease;
      border: 1px solid rgba(77, 121, 255, 0.1);
    }
    
    .feature-card:hover {
      transform: translateY(-5px);
      border-color: var(--tertiary);
    }
    
    .feature-icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .app-stats {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin-top: 30px;
    }
    
    .stat-card {
      background: rgba(15, 12, 36, 0.5);
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      min-width: 120px;
    }
    
    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .app-description {
      text-align: center;
      max-width: 800px;
      margin: 0 auto 40px;
      padding: 20px;
      background: rgba(15, 12, 36, 0.5);
      border-radius: 15px;
      border: 1px solid rgba(77, 121, 255, 0.2);
    }
    
    .guide-container {
      background: var(--card-bg);
      border-radius: 20px;
      padding: 25px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      margin-top: 40px;
    }
    
    .guide-title {
      font-size: 1.8rem;
      margin-bottom: 20px;
      color: var(--tertiary);
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .steps {
      counter-reset: step-counter;
      margin-left: 20px;
    }
    
    .step {
      position: relative;
      margin-bottom: 30px;
      padding-left: 50px;
    }
    
    .step:before {
      counter-increment: step-counter;
      content: counter(step-counter);
      position: absolute;
      left: 0;
      top: 0;
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2rem;
    }
    
    .step-title {
      font-size: 1.3rem;
      margin-bottom: 10px;
      color: var(--tertiary);
    }
    
    .step-content {
      background: rgba(0, 0, 0, 0.2);
      padding: 15px;
      border-radius: 10px;
      margin-top: 10px;
    }
    
    .backend-status {
      background: rgba(77, 121, 255, 0.15);
      padding: 15px;
      border-radius: 10px;
      margin: 20px 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .backend-connected {
      color: var(--tertiary);
    }
    
    .emotion-bar {
      height: 10px;
      width: 100%;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 5px;
      margin: 15px 0;
      overflow: hidden;
    }
    
    .emotion-level {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 5px;
      width: 0;
      transition: width 0.5s ease;
    }
    
    .emotion-stats {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
      background: rgba(0, 0, 0, 0.2);
      padding: 15px;
      border-radius: 15px;
    }
    
    .stat-item {
      text-align: center;
      padding: 10px;
    }
    
    .stat-number {
      font-size: 1.8rem;
      font-weight: bold;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .music-library-info {
      background: rgba(29, 185, 84, 0.15);
      padding: 15px;
      border-radius: 15px;
      margin: 20px 0;
      text-align: center;
    }
    
    .library-stats {
      display: flex;
      justify-content: space-around;
      margin-top: 15px;
    }
    
    .library-stat {
      text-align: center;
    }
    
    .library-number {
      font-size: 2rem;
      font-weight: bold;
    }
    
    .language-tag {
      display: inline-block;
      background: rgba(77, 121, 255, 0.2);
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.7rem;
      margin-left: 8px;
      text-transform: uppercase;
    }
  </style>
</head>
<body>
  <!-- Cosmic background elements -->
  <div class="cosmos" id="cosmos"></div>
  
  <div class="connection-status">
    <i class="fas fa-circle status-connected"></i>
    <span>Spotify Connected via Server</span>
  </div>
  
  <div class="container">
    <header>
      <h1><i class="fas fa-stars"></i> FEEL THE BEAT!</h1>
      <p class="subtitle">Your emotions shape the music. Experience real-time emotion detection with personalized cosmic soundscapes.</p>
      
      <div class="app-description">
        <p>Welcome to Feel The Beat -An Emotion Player with many popular songs perfectly matched to your emotions. All songs open directly in Spotify!</p>
      </div>
    </header>
    
    <div class="feature-grid">
      <div class="feature-card">
        <div class="feature-icon"><i class="fas fa-expand"></i></div>
        <h3>Expanded Music Library</h3>
        <p>100+ popular songs across all emotion categories</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon"><i class="fas fa-music"></i></div>
        <h3>Real Spotify Links</h3>
        <p>All songs open directly in Spotify</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon"><i class="fas fa-brain"></i></div>
        <h3>Advanced Emotion Detection</h3>
        <p>Improved AI with emotion intensity visualization</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon"><i class="fas fa-language"></i></div>
        <h3>Multi-Language Support</h3>
        <p>Filter songs by language preference</p>
      </div>
    </div>
        
    <div class="main-content">
      <div class="panel">
        <h2 class="panel-title"><i class="fas fa-camera"></i> Emotion Detection</h2>
        
        <div class="camera-container">
          <video id="video" autoplay muted playsinline></video>
          <canvas id="canvas"></canvas>
          <div class="status" id="camera-status">
            <div class="loading"></div> Loading camera...
          </div>
        </div>
        
        <div class="emotion-illustration">
          <div class="emoji-face" id="emoji-face">😐</div>
        </div>
        
        <div class="emotion-display">
          <span>Current Emotion:</span>
          <span class="emotion-value" id="emotion-text">neutral</span>
        </div>
        
        <div class="emotion-stats">
          <div class="stat-item">
            <div class="stat-number" id="happy-stat">0%</div>
            <div>Happy</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" id="sad-stat">0%</div>
            <div>Sad</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" id="angry-stat">0%</div>
            <div>Angry</div>
          </div>
        </div>
        
        <div class="visualizer" id="visualizer">
          <!-- Audio visualizer bars will be generated here -->
        </div>
        
        <div class="controls">
          <button id="start-btn" class="pulse">
            <i class="fas fa-play"></i> Start Detection
          </button>
          <button id="stop-btn" disabled>
            <i class="fas fa-stop"></i> Pause
          </button>
        </div>
        
        <div class="language-selector">
          <label>Music Language:</label>
          <select id="language-select">
            <option value="all">Universal Vibes (All Languages)</option>
            <option value="english">English</option>
            <option value="hindi">Hindi</option>
            <option value="spanish">Spanish</option>
            <option value="korean">Korean</option>
            <option value="french">French</option>
            <option value="japanese">Japanese</option>
          </select>
        </div>
        
        <div class="controls">
          <button id="detect-happy">
            <i class="fas fa-smile"></i> Happy
          </button>
          <button id="detect-sad">
            <i class="fas fa-sad-tear"></i> Sad
          </button>
          <button id="detect-angry">
            <i class="fas fa-angry"></i> Angry
          </button>
          <button id="detect-neutral">
            <i class="fas fa-meh"></i> Neutral
          </button>
        </div>
      </div>
      
      <div class="panel">
        <h2 class="panel-title"><i class="fas fa-music"></i> Cosmic Recommendations</h2>
        
        <div class="backend-status">
          <i class="fas fa-server"></i>
          <span>Connected to Spotify backend server</span>
        </div>
        
        <div class="status" id="status">
          <div class="loading"></div> Waiting for your emotions to guide the music...
        </div>
        
        <div class="song-list" id="song-list">
          <!-- Song list will be populated here -->
        </div>
      </div>
    </div>
    
    <div class="panel favorites-panel">
      <h2 class="panel-title"><i class="fas fa-heart"></i> Stellar Favorites</h2>
      <div class="favorites-grid" id="favorites-list">
        <div class="status">
          <i class="fas fa-star"></i> No favorites yet. Add some tracks to your stellar collection!
        </div>
      </div>
    </div>

    <div class="guide-container">
      <h2 class="guide-title"><i class="fas fa-info-circle"></i> How to Use</h2>
      <div class="steps">
        <div class="step">
          <h3 class="step-title">1. Allow Camera Access</h3>
          <p class="step-content">Grant permission to access your camera for emotion detection.</p>
        </div>
        <div class="step">
          <h3 class="step-title">2. Detect Your Emotion</h3>
          <p class="step-content">Click "Start Detection" and let the AI analyze your facial expressions.</p>
        </div>
        <div class="step">
          <h3 class="step-title">3. Select Language (Optional)</h3>
          <p class="step-content">Use the language selector to filter songs by your preferred language.</p>
        </div>
        <div class="step">
          <h3 class="step-title">4. Enjoy Cosmic Music</h3>
          <p class="step-content">Listen to music that matches your mood, and save your favorites!</p>
        </div>
      </div>
    </div>

    <div class="music-library-info">
      <h3><i class="fas fa-database"></i> Expanded Music Library</h3>
      <p>Now featuring 15+ popular songs for each emotion category</p>
      <div class="library-stats">
        <div class="library-stat">
          <div class="library-number">100+</div>
          <div>Total Songs</div>
        </div>
        <div class="library-stat">
          <div class="library-number">7</div>
          <div>Emotion Categories</div>
        </div>
        <div class="library-stat">
          <div class="library-number">6</div>
          <div>Languages</div>
        </div>
      </div>
    </div>
    
    <footer>
      <p>Feel The Beat - The Cosmic Emotion Based Song Player • Feel the universe through music</p>
      <p>Created By Swati ✨❤️</p>
    </footer>
  </div>

  <script>
    // Emotion to emoji mapping
    const emotionEmoji = {
      happy: '😊',
      sad: '😢',
      angry: '😠',
      fearful: '😨',
      disgusted: '🤢',
      surprised: '😲',
      neutral: '😐'
    };
    
    // Expanded music library with 15+ songs per emotion and multiple languages
    const musicLibrary = { 
    happy: [
    { id: '60nZcImufyMA1MKQY3dcCH', name: 'Happy', artist: 'Pharrell Williams', album: 'G I R L', image: 'https://i.scdn.co/image/ab67616d0000b2731c3e0a2f4ab8e3d7a7f3d0c5', language: 'english' },
    { id: '1WkMMavIMc4JZ8cfMmxHkI', name: "Can't Stop the Feeling!", artist: 'Justin Timberlake', album: 'Trolls (Original Motion Picture Soundtrack)', image: 'https://i.scdn.co/image/ab67616d0000b273a48964b5d9a3d6968ae3e0de', language: 'english' },
    { id: '3ZFTkvIE7kyPt6Nu3PEa7V', name: 'Uptown Funk', artist: 'Mark Ronson ft. Bruno Mars', album: 'Uptown Special', image: 'https://i.scdn.co/image/ab67616d0000b273b3c41592dbbc1b661c45e35e', language: 'english' },
    { id: '0VjIjW4GlUZAMYd2vXMi3b', name: 'Blinding Lights', artist: 'The Weeknd', album: 'After Hours', image: 'https://i.scdn.co/image/ab67616d0000b2730c1fdf06f1d712baccd0638d', language: 'english' },
    { id: '1RouRzlg8OKFeqc6LvdxmB', name: 'Felices los 4', artist: 'Maluma', album: 'F.A.M.E.', image: 'https://i.scdn.co/image/ab67616d0000b2739b9988280bbdbe0075f3a9a3', language: 'spanish' },
    { id: '0EYnPYvXve9tIsvI2zKFCB', name: 'Vivir Mi Vida', artist: 'Marc Anthony', album: '3.0', image: 'https://i.scdn.co/image/ab67616d0000b273c44e3e1524c53c9b6d9ffb39', language: 'spanish' },
    { id: '3lAun9V0YdTlCSIEXPvfsY', name: 'La Vie en rose', artist: 'Édith Piaf', album: "Hymne à l'amour", image: 'https://i.scdn.co/image/ab67616d0000b273457b5299c2798fbc9bd226c8', language: 'french' },
    { id: '7pWKhcRxqhtNTX7OfkTkoy', name: 'Alors on danse', artist: 'Stromae', album: 'Cheese', image: 'https://i.scdn.co/image/ab67616d0000b273e1f158a963b196bfc8f3db51', language: 'french' },
    { id: '3WbI06d8kr6TyGafMMpjAl', name: 'Jai Ho! (You Are My Destiny)', artist: 'A. R. Rahman, The Pussycat Dolls', album: 'Slumdog Millionaire (OST)', image: 'https://i.scdn.co/image/ab67616d0000b273b02de9be0fc18f3ed2c2086b', language: 'hindi' },
    { id: '5Fz5B7oQmJXQ1Z7uQ1n0k1', name: 'Genda Phool', artist: 'Badshah', album: 'Genda Phool', image: 'https://i.scdn.co/image/ab67616d0000b2730c1fdf06f1d712baccd0638d', language: 'hindi' },
    { id: '4hDok0OAJd57SGIT8xuWJH', name: 'Pretender', artist: 'Official HIGE DANdism', album: 'Traveler', image: 'https://i.scdn.co/image/ab67616d0000b27366049c7c7fd6f984b94225d4', language: 'japanese' },
    { id: '2Xo5OoQ6j4zH8gXqRYq7U1', name: 'Lemon', artist: 'Kenshi Yonezu', album: 'Lemon', image: 'https://i.scdn.co/image/ab67616d0000b27366049c7c7fd6f984b94225d4', language: 'japanese' },
    { id: '3f9zqUnrnIq0LANhmnaF0V', name: 'Dynamite', artist: 'BTS', album: 'Dynamite (DayTime Version)', image: 'https://i.scdn.co/image/ab67616d0000b273fbfbb519ae3dc6e231b27a59', language: 'korean' },
    { id: '2V8KvnD5LVeeDChMWEkSzC', name: 'Gangnam Style', artist: 'PSY', album: 'PSY 6 (Six Rules)', image: 'https://i.scdn.co/image/ab67616d0000b273bc8df8acb40d3d9c0f63f9f9', language: 'korean' },
    { id: '3dwgH6lXWvKDj7TKRRkVzY', name: 'Cheerleader (Felix Jaehn Remix)', artist: 'OMI', album: 'Cheerleader - Single', image: 'https://i.scdn.co/image/ab67616d0000b273b3c41592dbbc1b661c45e35e', language: 'english' },
    { id: '1qL7hFhrp7ilZ6LLI7Nis7', name: 'Sugar', artist: 'Maroon 5', album: 'V', image: 'https://i.scdn.co/image/ab67616d0000b273b2e80ed2a6a5b065dc1b9a91', language: 'english' }
      ],
    sad: [
  { id: '6QPKYGnAW9QozVz2dSWqRg', name: 'Someone Like You', artist: 'Adele', album: '21', image: 'https://i.scdn.co/image/ab67616d0000b273ba5db46f4b838ef6027e6f96', language: 'english' },
  { id: '7rvz6EtdLmcmJLqJvYpRSH', name: 'Everybody Hurts', artist: 'R.E.M.', album: 'Automatic for the People', image: 'https://i.scdn.co/image/ab67616d0000b2730a2a3a4b7d6b9a3c7b87a4b5', language: 'english' },
  { id: '1n8VPhzNaYUlqDAoVGR9Ty', name: 'Tears in Heaven', artist: 'Eric Clapton', album: 'Rush', image: 'https://i.scdn.co/image/ab67616d0000b273f3c21a9a414c12ed2f7e89d3', language: 'english' },
  { id: '3Ej7jo4f3B6KX5r7dMXdDA', name: 'La Llorona', artist: 'Chavela Vargas', album: 'Las 30 Grandes de Chavela Vargas', image: 'https://i.scdn.co/image/ab67616d0000b2735df2ec9fcbfbec1f59c8c44b', language: 'spanish' },
  { id: '5Fz9a1sXvjyBZxSTpJu4LR', name: 'Amor Eterno', artist: 'Juan Gabriel', album: 'Recuerdos', image: 'https://i.scdn.co/image/ab67616d0000b2734ed1e1de736a9c9a5d0425ff', language: 'spanish' },
  { id: '6cFcNMEHtx55G03T5r0o30', name: 'Ne me quitte pas', artist: 'Jacques Brel', album: 'Ces gens-là', image: 'https://i.scdn.co/image/ab67616d0000b273adac6d36eb657ee2a06602cc', language: 'french' },
  { id: '3Ofmpyhv5UAQ70mENzB277', name: 'Je suis malade', artist: 'Serge Lama', album: 'Je suis malade', image: 'https://i.scdn.co/image/ab67616d0000b273d7b59a5b5b5f6a5df8c3e2e9', language: 'french' },
  { id: '0Wtq1QUVYjCO5Z0e5PjKad', name: 'Tum Hi Ho', artist: 'Arijit Singh', album: 'Aashiqui 2', image: 'https://i.scdn.co/image/ab67616d0000b273c2c2c2c2c2c2c2c2c2c2c2c2', language: 'hindi' },
  { id: '5Fz5B7oQmJXQ1Z7uQ1n0k1', name: 'Channa Mereya', artist: 'Arijit Singh', album: 'Ae Dil Hai Mushkil', image: 'https://i.scdn.co/image/ab67616d0000b273d5d5d5d5d5d5d5d5d5d5d5d5', language: 'hindi' },
  { id: '4j0PNHkMr5axTwwo4r1Fkj', name: 'First Love', artist: 'Hikaru Utada', album: 'First Love', image: 'https://i.scdn.co/image/ab67616d0000b273de1219b67f7839dd0b71009d', language: 'japanese' },
  { id: '5y1tXzoQeZIvG9wGfOGyTp', name: 'Sakura Nagashi', artist: 'Hikaru Utada', album: 'Fantôme', image: 'https://i.scdn.co/image/ab67616d0000b273bde9c2c889fd7b33f94a9d26', language: 'japanese' },
  { id: '60nZcImufyMA1MKQY3dcCH', name: 'Fix You', artist: 'Coldplay', album: 'X&Y', image: 'https://i.scdn.co/image/ab67616d0000b273b3b3b3b3b3b3b3b3b3b3b3b3b3', language: 'english' },
  { id: '1WkMMavIMc4JZ8cfMmxHkI', name: 'Nothing Compares 2 U', artist: 'Sinéad O\'Connor', album: 'I Do Not Want What I Haven\'t Got', image: 'https://i.scdn.co/image/ab67616d0000b273a48964b5d9a3d6968ae3e0de', language: 'english' },
  { id: '5YbgcwHjQhdT1BYQ4rxWLD', name: 'Hallelujah', artist: 'Jeff Buckley', album: 'Grace', image: 'https://i.scdn.co/image/ab67616d0000b273e52a59a28efa4773aa2b7d16', language: 'english' },
  { id: '2V8KvnD5LVeeDChMWEkSzC', name: 'Adiós', artist: 'Ricky Martin', album: 'A Medio Vivir', image: 'https://i.scdn.co/image/ab67616d0000b273c6ba98e3a7e5be1b1c7b0e8f5', language: 'spanish' },
  { id: '3l4nVByZpYEqcEaDBGmOzI', name: 'El Triste', artist: 'José José', album: 'El Triste', image: 'https://i.scdn.co/image/ab67616d0000b273d8cc2281fcdb9c6d6e9c8c9b', language: 'spanish' }
],

    calm: [
  { id: '3f9zqUnrnIq0LANhmnaF0V', name: 'Weightless', artist: 'Marconi Union', album: 'Weightless (Ambient Transmission Vol. 2)', image: 'https://i.scdn.co/image/ab67616d0000b273f0f0f0f0f0f0f0f0f0f0f0f0', language: 'english' },
  { id: '0k2WOh0Sf2O0k7p3tq4l7c', name: 'Clair de Lune', artist: 'Claude Debussy', album: 'Suite bergamasque', image: 'https://i.scdn.co/image/ab67616d0000b273a9a9a9a9a9a9a9a9a9a9a9a9a', language: 'instrumental' },
  { id: '5YbgcwHjQhdT1BYQ4rxWLD', name: 'Relajación', artist: 'Jesús Molina', album: 'Piano Meditativo', image: 'https://i.scdn.co/image/ab67616d0000b273b0b0b0b0b0b0b0b0b0b0b0b0', language: 'spanish' },
  { id: '2V8KvnD5LVeeDChMWEkSzC', name: 'Bésame Mucho', artist: 'Consuelo Velázquez', album: 'Boleros Eternos', image: 'https://i.scdn.co/image/ab67616d0000b273c1c1c1c1c1c1c1c1c1c1c1c1', language: 'spanish' },
  { id: '0aZ3z5q2CO7u4Jx84lwXe4', name: 'Comptine d\'un autre été', artist: 'Yann Tiersen', album: 'Amélie (Soundtrack)', image: 'https://i.scdn.co/image/ab67616d0000b273d3d3d3d3d3d3d3d3d3d3d3d3', language: 'french' },
  { id: '2Yr7gZQ0vTkXQoKxZ5bH5E', name: 'La nuit', artist: 'Cœur de Pirate', album: 'Cœur de Pirate', image: 'https://i.scdn.co/image/ab67616d0000b273a4a4a4a4a4a4a4a4a4a4a4a4', language: 'french' },
  { id: '0Wtq1QUVYjCO5Z0e5PjKad', name: 'Raabta', artist: 'Arijit Singh', album: 'Agent Vinod', image: 'https://i.scdn.co/image/ab67616d0000b273b5b5b5b5b5b5b5b5b5b5b5b5', language: 'hindi' },
  { id: '5Fz5B7oQmJXQ1Z7uQ1n0k1', name: 'Tum Se Hi', artist: 'Mohit Chauhan', album: 'Jab We Met', image: 'https://i.scdn.co/image/ab67616d0000b273c6c6c6c6c6c6c6c6c6c6c6c6', language: 'hindi' },
  { id: '2Xo5OoQ6j4zH8gXqRYq7U1', name: 'Spring Day', artist: 'BTS', album: 'You Never Walk Alone', image: 'https://i.scdn.co/image/ab67616d0000b273d8d8d8d8d8d8d8d8d8d8d8d8', language: 'korean' },
  { id: '4X7eJ1E2Y1lzoEABg2cZ5r', name: 'One Summer\'s Day', artist: 'Joe Hisaishi', album: 'Spirited Away', image: 'https://i.scdn.co/image/ab67616d0000b273e0e0e0e0e0e0e0e0e0e0e0e0', language: 'japanese' },
  { id: '60nZcImufyMA1MKQY3dcCH', name: 'River Flows in You', artist: 'Yiruma', album: 'First Love', image: 'https://i.scdn.co/image/ab67616d0000b273b4b4b4b4b4b4b4b4b4b4b4b4', language: 'instrumental' },
  { id: '1WkMMavIMc4JZ8cfMmxHkI', name: 'Gymnopédie No.1', artist: 'Erik Satie', album: 'Gymnopédies', image: 'https://i.scdn.co/image/ab67616d0000b273c5c5c5c5c5c5c5c5c5c5c5c5', language: 'instrumental' },
  { id: '5YbgcwHjQhdT1BYQ4rxWLD', name: 'Meditation', artist: 'Massane', album: 'Another Dawn', image: 'https://i.scdn.co/image/ab67616d0000b273d6d6d6d6d6d6d6d6d6d6d6d6', language: 'english' },
  { id: '2V8KvnD5LVeeDChMWEkSzC', name: 'Ocean', artist: 'Enya', album: 'Watermark', image: 'https://i.scdn.co/image/ab67616d0000b273e1e1e1e1e1e1e1e1e1e1e1e1', language: 'english' },
  { id: '7s25wX1Jq5u8l7q7AHPjHq', name: 'Pure Shores', artist: 'All Saints', album: 'Saints & Sinners', image: 'https://i.scdn.co/image/ab67616d0000b273f1f1f1f1f1f1f1f1f1f1f1f1f1', language: 'english' }
],
    angry: [
  { id: '1h0tC5X1l1yibp32J6Zs4R', name: 'Thunderstruck', artist: 'AC/DC', album: 'The Razors Edge', image: 'https://i.scdn.co/image/ab67616d0000b273c8c4d85aecc5d4d5b5b5b5b5b', language: 'english' },
  { id: '2eB7JqIY4hG5qRuekS6Yqn', name: 'Eye of the Tiger', artist: 'Survivor', album: 'Eye of the Tiger', image: 'https://i.scdn.co/image/ab67616d0000b273d6d6d6d6d6d6d6d6d6d6d6d6', language: 'english' },
  { id: '5YbgcwHjQhdT1BYQ4rxWLD', name: 'Gasolina', artist: 'Daddy Yankee', album: 'Barrio Fino', image: 'https://i.scdn.co/image/ab67616d0000b273e1e1e1e1e1e1e1e1e1e1e1e1', language: 'spanish' },
  { id: '2V8KvnD5LVeeDChMWEkSzC', name: 'Danza Kuduro', artist: 'Don Omar', album: 'Meet the Orphans', image: 'https://i.scdn.co/image/ab67616d0000b273c4c4c4c4c4c4c4c4c4c4c4c4', language: 'spanish' },
  { id: '0aZ3z5q2CO7u4Jx84lwXe4', name: 'Alors on danse', artist: 'Stromae', album: 'Cheese', image: 'https://i.scdn.co/image/ab67616d0000b273b3b3b3b3b3b3b3b3b3b3b3b3', language: 'french' },
  { id: '2Yr7gZQ0vTkXQoKxZ5bH5E', name: 'Dernière danse', artist: 'Indila', album: 'Mini World', image: 'https://i.scdn.co/image/ab67616d0000b273a2a2a2a2a2a2a2a2a2a2a2a2', language: 'french' },
  { id: '0Wtq1QUVYjCO5Z0e5PjKad', name: 'Badtameez Dil', artist: 'Ranveer Singh', album: 'Yeh Jawaani Hai Deewani', image: 'https://i.scdn.co/image/ab67616d0000b273b4b4b4b4b4b4b4b4b4b4b4b4', language: 'hindi' },
  { id: '5Fz5B7oQmJXQ1Z7uQ1n0k1', name: 'London Thumakda', artist: 'Amit Trivedi', album: 'Queen', image: 'https://i.scdn.co/image/ab67616d0000b273c5c5c5c5c5c5c5c5c5c5c5c5', language: 'hindi' },
  { id: '2Xo5OoQ6j4zH8gXqRYq7U1', name: 'Gurenge', artist: 'LiSA', album: 'Gurenge', image: 'https://i.scdn.co/image/ab67616d0000b273d7d7d7d7d7d7d7d7d7d7d7d7', language: 'japanese' },
  { id: '4X7eJ1E2Y1lzoEABg2cZ5r', name: 'U.S.A.', artist: 'DA PUMP', album: 'U.S.A.', image: 'https://i.scdn.co/image/ab67616d0000b273e8e8e8e8e8e8e8e8e8e8e8e8', language: 'japanese' },
  { id: '60nZcImufyMA1MKQY3dcCH', name: 'High Hopes', artist: 'Panic! At The Disco', album: 'Pray for the Wicked', image: 'https://i.scdn.co/image/ab67616d0000b273c3c3c3c3c3c3c3c3c3c3c3c3', language: 'english' },
  { id: '1WkMMavIMc4JZ8cfMmxHkI', name: 'Firework', artist: 'Katy Perry', album: 'Teenage Dream', image: 'https://i.scdn.co/image/ab67616d0000b273a48964b5d9a3d6968ae3e0de', language: 'english' },
  { id: '5YbgcwHjQhdT1BYQ4rxWLD', name: 'Waka Waka', artist: 'Shakira', album: 'Sale el Sol', image: 'https://i.scdn.co/image/ab67616d0000b273e52a59a28efa4773aa2b7d16', language: 'spanish' },
  { id: '2V8KvnD5LVeeDChMWEkSzC', name: 'Bailando', artist: 'Enrique Iglesias', album: 'Sex and Love', image: 'https://i.scdn.co/image/ab67616d0000b273c6ba98e3a7e5be1b1c7b0e8f5', language: 'spanish' },
  { id: '7s25wX1Jq5u8l7q7AHPjHq', name: 'Koi Mil Gaya', artist: 'Udit Narayan', album: 'Kuch Kuch Hota Hai', image: 'https://i.scdn.co/image/ab67616d0000b273d8cc2281fcdb9c6d6e9c8c9b', language: 'hindi' }
],

      romantic: [
        { id: '0C5X5Rf5WQuPwkr4XZ4C0J', name: 'Perfect', artist: 'Ed Sheeran', album: '÷', image: 'https://i.scdn.co/image/ab67616d0000b273a7a7a7a7a7a7a7a7a7a7a7a7', language: 'english' },
        { id: '0k2WOh0Sf2O0k7p3tq4l7c', name: 'All of Me', artist: 'John Legend', album: 'Love in the Future', image: 'https://i.scdn.co/image/ab67616d0000b273b9b9b9b9b9b9b9b9b9b9b9b9', language: 'english' },
        { id: '5YbgcwHjQhdT1BYQ4rxWLD', name: 'Bachata Rosa', artist: 'Juan Luis Guerra', album: 'Bachata Rosa', image: 'https://i.scdn.co/image/ab67616d0000b273c0c0c0c0c0c0c0c0c0c0c0c0', language: 'spanish' },
        { id: '2V8KvnD5LVeeDChMWEkSzC', name: 'Amor Completo', artist: 'Mon Laferte', album: 'Mon Laferte (Vol. 1)', image: 'https://i.scdn.co/image/ab67616d0000b273d1d1d1d1d1d1d1d1d1d1d1d1', language: 'spanish' },
        { id: '0aZ3z5q2CO7u4Jx84lwXe4', name: 'Je t\'aime', artist: 'Lara Fabian', album: 'Lara Fabian', image: 'https://i.scdn.co/image/ab67616d0000b273a3a3a3a3a3a3a3a3a3a3a3a3', language: 'french' },
        { id: '2Yr7gZQ0vTkXQoKxZ5bH5E', name: 'La vie en rose', artist: 'Louis Armstrong', album: 'All Time Greatest Hits', image: 'https://i.scdn.co/image/ab67616d0000b273b2b2b2b2b2b2b2b2b2b2b2b2', language: 'french' },
        { id: '0Wtq1QUVYjCO5Z0e5PjKad', name: 'Tum Hi Ho', artist: 'Arijit Singh', album: 'Aashiqui 2', image: 'https://i.scdn.co/image/ab67616d0000b273c3c3c3c3c3c3c3c3c3c3c3c3', language: 'hindi' },
        { id: '5Fz5B7oQmJXQ1Z7uQ1n0k1', name: 'Enna Sona', artist: 'Arijit Singh', album: 'OK Jaanu', image: 'https://i.scdn.co/image/ab67616d0000b273d4d4d4d4d4d4d4d4d4d4d4d4', language: 'hindi' },
        { id: '2Xo5OoQ6j4zH8gXqRYq7U1', name: 'First Love', artist: 'Hikaru Utada', album: 'First Love', image: 'https://i.scdn.co/image/ab67616d0000b273e5e5e5e5e5e5e5e5e5e5e5e5', language: 'japanese' },
        { id: '4X7eJ1E2Y1lzoEABg2cZ5r', name: 'Lovers', artist: '7!!', album: 'Lovers', image: 'https://i.scdn.co/image/ab67616d0000b273f6f6f6f6f6f6f6f6f6f6f6f6', language: 'japanese' },
        { id: '60nZcImufyMA1MKQY3dcCH', name: 'Thinking Out Loud', artist: 'Ed Sheeran', album: 'x', image: 'https://i.scdn.co/image/ab67616d0000b2731c3e0a2f4ab8e3d7a7f3d0c5', language: 'english' },
        { id: '1WkMMavIMc4JZ8cfMmxHkI', name: 'Just the Way You Are', artist: 'Bruno Mars', album: 'Doo-Wops & Hooligans', image: 'https://i.scdn.co/image/ab67616d0000b273a48964b5d9a3d6968ae3e0de', language: 'english' },
        { id: '5YbgcwHjQhdT1BYQ4rxWLD', name: 'Amor Prohibido', artist: 'Selena', album: 'Amor Prohibido', image: 'https://i.scdn.co/image/ab67616d0000b273e52a59a28efa4773aa2b7d16', language: 'spanish' },
        { id: '2V8KvnD5LVeeDChMWEkSzC', name: 'Eres Tú', artist: 'Mocedades', album: 'Mocedades 4', image: 'https://i.scdn.co/image/ab67616d0000b273c6ba98e3a7e5be1b1c7b0e8f5', language: 'spanish' },
        { id: '7s25wX1Jq5u8l7q7AHPjHq', name: 'Je T\'aime... Moi Non Plus', artist: 'Serge Gainsbourg', album: 'Jane Birkin - Serge Gainsbourg', image: 'https://i.scdn.co/image/ab67616d0000b273d8cc2281fcdb9c6d6e9c8c9b', language: 'french' }
      ],
      neutral: [
        { id: '3f9zqUnrnIq0LANhmnaF0V', name: 'Blinding Lights', artist: 'The Weeknd', album: 'After Hours', image: 'https://i.scdn.co/image/ab67616d0000b273e9e9e9e9e9e9e9e9e9e9e9e9', language: 'english' },
        { id: '0k2WOh0Sf2O0k7p3tq4l7c', name: 'Shape of You', artist: 'Ed Sheeran', album: '÷', image: 'https://i.scdn.co/image/ab67616d0000b273a8a8a8a8a8a8a8a8a8a8a8a8', language: 'english' },
        { id: '5YbgcwHjQhdT1BYQ4rxWLD', name: 'Despacito', artist: 'Luis Fonsi', album: 'Vida', image: 'https://i.scdn.co/image/ab67616d0000b273b1b1b1b1b1b1b1b1b1b1b1b1', language: 'spanish' },
        { id: '2V8KvnD5LVeeDChMWEkSzC', name: 'La Tortura', artist: 'Shakira', album: 'Fijación Oral Vol. 1', image: 'https://i.scdn.co/image/ab67616d0000b273c2c2c2c2c2c2c2c2c2c2c2c2', language: 'spanish' },
        { id: '0aZ3z5q2CO7u4Jx84lwXe4', name: 'Dernière danse', artist: 'Indila', album: 'Mini World', image: 'https://i.scdn.co/image/ab67616d0000b273d2d2d2d2d2d2d2d2d2d2d2d2', language: 'french' },
        { id: '2Yr7gZQ0vTkXQoKxZ5bH5E', name: 'Tous les mêmes', artist: 'Stromae', album: 'Racine carrée', image: 'https://i.scdn.co/image/ab67616d0000b273a1a1a1a1a1a1a1a1a1a1a1a1', language: 'french' },
        { id: '0Wtq1QUVYjCO5Z0e5PjKad', name: 'Channa Mereya', artist: 'Arijit Singh', album: 'Ae Dil Hai Mushkil', image: 'https://i.scdn.co/image/ab67616d0000b273b3b3b3b3b3b3b3b3b3b3b3b3', language: 'hindi' },
        { id: '5Fz5B7oQmJXQ1Z7uQ1n0k1', name: 'Gerua', artist: 'Arijit Singh', album: 'Dilwale', image: 'https://i.scdn.co/image/ab67616d0000b273c4c4c4c4c4c4c4c4c4c4c4c4', language: 'hindi' },
        { id: '2Xo5OoQ6j4zH8gXqRYq7U1', name: 'Lemon', artist: 'Kenshi Yonezu', album: 'Lemon', image: 'https://i.scdn.co/image/ab67616d0000b273d5d5d5d5d5d5d5d5d5d5d5d5', language: 'japanese' },
        { id: '4X7eJ1E2Y1lzoEABg2cZ5r', name: 'Pretender', artist: 'Official HIGE DANdism', album: 'Traveler', image: 'https://i.scdn.co/image/ab67616d0000b273e7e7e7e7e7e7e7e7e7e7e7e7', language: 'japanese' },
        { id: '60nZcImufyMA1MKQY3dcCH', name: 'Dance Monkey', artist: 'Tones and I', album: 'The Kids Are Coming', image: 'https://i.scdn.co/image/ab67616d0000b2731c3e0a2f4ab8e3d7a7f3d0c5', language: 'english' },
        { id: '1WkMMavIMc4JZ8cfMmxHkI', name: 'Bad Guy', artist: 'Billie Eilish', album: 'When We All Fall Asleep, Where Do We Go?', image: 'https://i.scdn.co/image/ab67616d0000b273a48964b5d9a3d6968ae3e0de', language: 'english' },
        { id: '5YbgcwHjQhdT1BYQ4rxWLD', name: 'Smooth Criminal', artist: 'Michael Jackson', album: 'Bad', image: 'https://i.scdn.co/image/ab67616d0000b273e52a59a28efa4773aa2b7d16', language: 'english' },
        { id: '2V8KvnD5LVeeDChMWEkSzC', name: 'Vivir Mi Vida', artist: 'Marc Anthony', album: '3.0', image: 'https://i.scdn.co/image/ab67616d0000b273c6ba98e3a7e5be1b1c7b0e8f5', language: 'spanish' },
        { id: '7s25wX1Jq5u8l7q7AHPjHq', name: 'Gangnam Style', artist: 'PSY', album: 'PSY 6 (Six Rules)', image: 'https://i.scdn.co/image/ab67616d0000b273d8cc2281fcdb9c6d6e9c8c9b', language: 'korean' }
      ]
    };

    // Global state
    let currentEmotion = 'neutral';
    let selectedLanguage = 'all';

    // Create cosmic background
    function createCosmos() {
      const cosmos = document.getElementById('cosmos');
      if (!cosmos) return;
      
      cosmos.innerHTML = '';
      
      // Create stars
      for (let i = 0; i < 200; i++) {
        const star = document.createElement('div');
        star.classList.add('star');
        star.style.width = `${Math.random() * 4}px`;
        star.style.height = star.style.width;
        star.style.left = `${Math.random() * 100}%`;
        star.style.top = `${Math.random() * 100}%`;
        star.style.setProperty('--duration', `${Math.random() * 10 + 5}s`);
        cosmos.appendChild(star);
      }
      
      // Create nebulas
      for (let i = 0; i < 6; i++) {
        const nebula = document.createElement('div');
        nebula.classList.add('nebula');
        nebula.style.width = `${Math.random() * 400 + 200}px`;
        nebula.style.height = nebula.style.width;
        nebula.style.left = `${Math.random() * 100}%`;
        nebula.style.top = `${Math.random() * 100}%`;
        nebula.style.background = `radial-gradient(circle, 
          ${i % 2 === 0 ? 'rgba(255, 77, 148, 0.5)' : 'rgba(77, 121, 255, 0.5)'}, 
          transparent 70%)`;
        cosmos.appendChild(nebula);
      }
      
      // Create floating shapes
      for (let i = 0; i < 12; i++) {
        const shape = document.createElement('div');
        shape.classList.add('floating');
        shape.style.width = `${Math.random() * 120 + 50}px`;
        shape.style.height = shape.style.width;
        shape.style.left = `${Math.random() * 100}%`;
        shape.style.top = `${Math.random() * 100}%`;
        shape.style.background = `conic-gradient(
          from ${Math.random() * 360}deg,
          rgba(255, 77, 148, 0.3),
          rgba(77, 121, 255, 0.3),
          rgba(77, 255, 223, 0.3),
          rgba(255, 77, 148, 0.3)
        )`;
        shape.style.borderRadius = `${Math.random() * 50}%`;
        shape.style.animationDuration = `${Math.random() * 25 + 20}s`;
        cosmos.appendChild(shape);
      }
    }
    
    // Create audio visualizer
    function createVisualizer() {
      const visualizer = document.getElementById('visualizer');
      if (!visualizer) return;
      
      visualizer.innerHTML = '';
      
      for (let i = 0; i < 40; i++) {
        const bar = document.createElement('div');
        bar.classList.add('bar');
        bar.style.setProperty('--i', i);
        bar.style.height = `${Math.random() * 50 + 10}%`;
        visualizer.appendChild(bar);
      }
    }
    
    // Show notification
    function showNotification(message, isSuccess = true) {
      const notification = document.createElement('div');
      notification.className = isSuccess ? 'notification show' : 'notification error show';
      notification.innerHTML = `
        <i class="fab fa-spotify"></i>
        <span>${message}</span>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 500);
      }, 3000);
    }
    
    // Initialize the application
    async function initApp() {
      createCosmos();
      createVisualizer();
      setupEventListeners();
      renderFavorites();
      
      // Set initial emotion
      updateEmotionDisplay('neutral');
      
      // Setup camera
      await setupCamera();
      
      // Load face-api models
      await loadFaceModels();
      
      // Load initial songs
      updateSongsForEmotion('neutral');
    }
    
    // Setup camera
    async function setupCamera() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ 
          video: { 
            facingMode: 'user',
            width: { ideal: 640 },
            height: { ideal: 480 }
          } 
        });
        const video = document.getElementById('video');
        if (!video) return;
        
        video.srcObject = stream;
        
        // Hide loading message
        const cameraStatus = document.getElementById('camera-status');
        if (cameraStatus) cameraStatus.style.display = 'none';
        
        return new Promise(resolve => {
          video.onloadedmetadata = () => {
            resolve(video);
          };
        });
      } catch (err) {
        console.error('Camera error:', err);
        const cameraStatus = document.getElementById('camera-status');
        if (cameraStatus) {
          cameraStatus.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Could not access camera. Please enable permissions.';
        }
        return null;
      }
    }
    
    // Load face-api models
    async function loadFaceModels() {
      // Load models from CDN
      const MODEL_URL = 'https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights';
      
      await faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL);
      await faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL);
      await faceapi.nets.faceExpressionNet.loadFromUri(MODEL_URL);
    }
    
    // Update emotion display
    function updateEmotionDisplay(emotion) {
      const emotionText = document.getElementById('emotion-text');
      if (emotionText) emotionText.textContent = emotion;
      
      const emojiFace = document.getElementById('emoji-face');
      if (emojiFace) emojiFace.textContent = emotionEmoji[emotion] || '🤔';
    }
    
    // Update emotion stats
    function updateEmotionStats(expressions) {
      // Update the emotion intensity bars
      const happyStat = document.getElementById('happy-stat');
      const sadStat = document.getElementById('sad-stat');
      const angryStat = document.getElementById('angry-stat');
      
      if (happyStat) happyStat.textContent = `${Math.round(expressions.happy * 100)}%`;
      if (sadStat) sadStat.textContent = `${Math.round(expressions.sad * 100)}%`;
      if (angryStat) angryStat.textContent = `${Math.round(expressions.angry * 100)}%`;
    }
    
    // Setup event listeners
    function setupEventListeners() {
      // Emotion buttons
      const detectHappy = document.getElementById('detect-happy');
      if (detectHappy) {
        detectHappy.addEventListener('click', () => {
          updateEmotionDisplay('happy');
          updateSongsForEmotion('happy');
        });
      }
      
      const detectSad = document.getElementById('detect-sad');
      if (detectSad) {
        detectSad.addEventListener('click', () => {
          updateEmotionDisplay('sad');
          updateSongsForEmotion('sad');
        });
      }
      
      const detectAngry = document.getElementById('detect-angry');
      if (detectAngry) {
        detectAngry.addEventListener('click', () => {
          updateEmotionDisplay('angry');
          updateSongsForEmotion('angry');
        });
      }
      
      const detectNeutral = document.getElementById('detect-neutral');
      if (detectNeutral) {
        detectNeutral.addEventListener('click', () => {
          updateEmotionDisplay('neutral');
          updateSongsForEmotion('neutral');
        });
      }
      
      // Start/stop buttons
      const startBtn = document.getElementById('start-btn');
      if (startBtn) {
        startBtn.addEventListener('click', () => {
          startDetection();
        });
      }
      
      const stopBtn = document.getElementById('stop-btn');
      if (stopBtn) {
        stopBtn.addEventListener('click', () => {
          stopDetection();
        });
      }
      
      // Language selector
      const languageSelect = document.getElementById('language-select');
      if (languageSelect) {
        languageSelect.addEventListener('change', () => {
          selectedLanguage = languageSelect.value;
          const emotionText = document.getElementById('emotion-text');
          if (emotionText && emotionText.textContent !== 'none') {
            updateSongsForEmotion(emotionText.textContent);
          }
        });
      }
    }
    
    // Start detection
    function startDetection() {
      const startBtn = document.getElementById('start-btn');
      const stopBtn = document.getElementById('stop-btn');
      if (!startBtn || !stopBtn) return;
      
      startBtn.disabled = true;
      stopBtn.disabled = false;
      
      const video = document.getElementById('video');
      const canvas = document.getElementById('canvas');
      if (!video || !canvas) return;
      
      const ctx = canvas.getContext('2d');
      
      // Set canvas size to match video
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      
      // Start detection loop
      const detectInterval = setInterval(async () => {
        if (!stopBtn || stopBtn.disabled) {
          clearInterval(detectInterval);
          return;
        }
        
        // Detect emotions
        const detections = await faceapi.detectSingleFace(
          video, 
          new faceapi.TinyFaceDetectorOptions()
        ).withFaceLandmarks().withFaceExpressions();
        
        if (detections) {
          // Draw detection on canvas
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          faceapi.draw.drawDetections(canvas, detections);
          faceapi.draw.drawFaceLandmarks(canvas, detections);
          faceapi.draw.drawFaceExpressions(canvas, detections);
          
          // Get dominant emotion
          const expressions = detections.expressions;
          const emotion = Object.keys(expressions).reduce(
            (a, b) => expressions[a] > expressions[b] ? a : b
          );
          
          // Update UI
          updateEmotionDisplay(emotion);
          updateEmotionStats(expressions);
          updateSongsForEmotion(emotion);
        }
      }, 1000);
      
      // Store interval ID to stop later
      window.detectInterval = detectInterval;
    }
    
    // Stop detection
    function stopDetection() {
      const startBtn = document.getElementById('start-btn');
      const stopBtn = document.getElementById('stop-btn');
      if (!startBtn || !stopBtn) return;
      
      startBtn.disabled = false;
      stopBtn.disabled = true;
      
      // Clear detection interval
      if (window.detectInterval) {
        clearInterval(window.detectInterval);
      }
      
      // Clear canvas
      const canvas = document.getElementById('canvas');
      if (canvas) {
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }
    }
    
    // Open song in Spotify app
    function openInSpotify(trackId) {
      // Direct link to the track - this always works
      window.open(`https://open.spotify.com/track/${trackId}`, '_blank');
    }
    
    // Fetch recommendations with language filtering
    async function fetchSpotifyRecommendations(emotion) {
      const statusDiv = document.getElementById('status');
      if (!statusDiv) return [];
      
      statusDiv.innerHTML = `<div class="loading"></div> Creating ${emotion} cosmic soundscape...`;
      
      // Simulate API call delay
      await new Promise(resolve => setTimeout(resolve, 1500));
      
      // Get tracks for the emotion
      let tracks = musicLibrary[emotion] || musicLibrary.neutral;
      
      // Filter by language if not "all"
      if (selectedLanguage !== 'all') {
        tracks = tracks.filter(track => track.language === selectedLanguage);
      }
      
      // Update status message with language info
      if (statusDiv) {
        const langText = selectedLanguage === 'all' ? '' : ` in ${selectedLanguage}`;
        statusDiv.innerHTML = `<i class="fab fa-spotify spotify-icon"></i> Found ${tracks.length} cosmic tracks for ${emotion}${langText}`;
      }
      
      return tracks;
    }
    
    // Update songs based on emotion
    async function updateSongsForEmotion(emotion) {
      try {
        const tracks = await fetchSpotifyRecommendations(emotion);
        renderSongList(tracks);
      } catch (error) {
        console.error('Error fetching Spotify recommendations:', error);
        const statusDiv = document.getElementById('status');
        if (statusDiv) {
          statusDiv.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${error.message}`;
        }
      }
    }
    
    // Render song list
    function renderSongList(tracks) {
      const songListDiv = document.getElementById('song-list');
      if (!songListDiv) return;
      
      songListDiv.innerHTML = '';
      
      tracks.forEach(track => {
        const trackEl = document.createElement('div');
        trackEl.className = 'track';
        trackEl.setAttribute('data-id', track.id);
        
        trackEl.innerHTML = `
          <img src="${track.image}" alt="${track.name}">
          <div class="track-info">
            <h3>${track.name} <span class="language-tag">${track.language}</span></h3>
            <p>${track.artist} • ${track.album}</p>
          </div>
          <div class="track-actions">
            <button class="play-btn">
              <i class="fas fa-play"></i>
            </button>
            <button class="favorite-btn">
              <i class="fas fa-heart"></i>
            </button>
          </div>
        `;
        
        songListDiv.appendChild(trackEl);
      });
      
      // Add event listeners to tracks
      document.querySelectorAll('.track').forEach((track) => {
        track.addEventListener('click', (e) => {
          if (!e.target.closest('button')) {
            const trackId = track.getAttribute('data-id');
            openInSpotify(trackId);
          }
        });
      });
      
      // Add event listeners to play buttons
      document.querySelectorAll('.track .play-btn').forEach((btn) => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const track = btn.closest('.track');
          const trackId = track.getAttribute('data-id');
          openInSpotify(trackId);
        });
      });
      
      // Add event listeners to favorite buttons
      document.querySelectorAll('.track .favorite-btn').forEach((btn, index) => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const track = btn.closest('.track');
          const trackId = track.getAttribute('data-id');
          const trackData = tracks.find(t => t.id === trackId);
          if (trackData) {
            addToFavorites(trackData);
            btn.innerHTML = '<i class="fas fa-check"></i>';
            showNotification('Added to favorites!');
            setTimeout(() => {
              btn.innerHTML = '<i class="fas fa-heart"></i>';
            }, 1000);
          }
        });
      });
    }
    
    // Add to favorites
    function addToFavorites(track) {
      const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
      
      // Check if already in favorites
      if (!favorites.some(fav => fav.id === track.id)) {
        favorites.push(track);
        localStorage.setItem('favorites', JSON.stringify(favorites));
        renderFavorites();
      }
    }
    
    // Render favorites
    function renderFavorites() {
      const favoritesListDiv = document.getElementById('favorites-list');
      if (!favoritesListDiv) return;
      
      favoritesListDiv.innerHTML = '';
      
      const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
      
      if (favorites.length === 0) {
        favoritesListDiv.innerHTML = `
          <div class="status">
            <i class="fas fa-star"></i> No favorites yet. Add some tracks to your stellar collection!
          </div>
        `;
        return;
      }
      
      favorites.forEach(track => {
        const card = document.createElement('div');
        card.className = 'favorite-card';
        card.setAttribute('data-id', track.id);
        
        card.innerHTML = `
          <img src="${track.image}" alt="${track.name}">
          <h3>${track.name} <span class="language-tag">${track.language}</span></h3>
          <p>${track.artist}</p>
          <div class="track-actions" style="margin-top: 15px;">
            <button class="play-btn">
              <i class="fas fa-play"></i>
            </button>
            <button class="remove-btn">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        `;
        
        favoritesListDiv.appendChild(card);
      });
      
      // Add event listeners to favorites
      document.querySelectorAll('.favorite-card').forEach((card) => {
        card.addEventListener('click', (e) => {
          if (!e.target.closest('button')) {
            const trackId = card.getAttribute('data-id');
            openInSpotify(trackId);
          }
        });
      });
      
      document.querySelectorAll('.favorite-card .play-btn').forEach((btn) => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const card = btn.closest('.favorite-card');
          const trackId = card.getAttribute('data-id');
          openInSpotify(trackId);
        });
      });
      
      document.querySelectorAll('.favorite-card .remove-btn').forEach((btn, index) => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
          favorites.splice(index, 1);
          localStorage.setItem('favorites', JSON.stringify(favorites));
          renderFavorites();
          showNotification('Removed from favorites!');
        });
      });
    }
    
    // Initialize the app when the page loads
    window.addEventListener('DOMContentLoaded', initApp);
  </script>
</body>
</html>